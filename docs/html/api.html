<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> BiTToll</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="css/bootstrap.css"            rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>


<div class="navbar navbar-inverse navbar-static-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="/">BiTToll</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a href="/">About</a></li>
                    <li class="active"><a href="/api">API</a></li>
                    <li><a href="/contrib">Contributing</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>

<!--- Main Body ---!>
<div class="container">
    <div class="row">
        <div class="span3">
            NAVVY
        </div>

        <div class="span9">
            <section id="general">
            <div class="page-header">
                <h1> General </h1>
            </div>
            <h2> Format </h2>
            <p>
            Our API is based on http posts to specific URL's. The body of the http post must be a <a href="http://www.json.org/">JSON</a> encoded object. There are three fields in the object which all endpoints require unless otherwise noted. The first field is the username field. This is a unique string identifying the account you are accessing. The second field is a time field. It should have a value of the time in seconds in unix format. The third is the sign field which acts as a password authorizing the API action.</p>
            <p>
            For example the following is a valid http post body.
            </p>
<pre>{
    "username": "6f681f4d183923dba72783311ade639b2c04455013da8f1cd4bbb201864110a7",
    "sign": "402dab5937984dc3a96afc120c4c358a",
    "time": "1369431889.55"
}</pre>
            <h2> Time Field </h2>
            <p>
            This field is the unix time, which is the time in seconds since the first second of January 1st 1970. Requests are not accepted if the time field indicates they were sent more than 30 seconds in the past. This is to prevent replay attacks in the unlikely event that someone is intercepting your post to the bittoll server.

            <h2> Sign Field</h2>
            <p>
            The sign field which is the hex encoded md5 hash of the concatenation of the values of all other fields on the object, sorted alphabetically by key, followed by the accounts secret.
            </p>
            <p>
            For example for the following json object
            </p>
            <pre>
{
    "username":"bob",
    "target":"seattle",
}</pre>
            <p>
            The signature should be <code>md5("seattle"+"bob"+"secret")</code> where "secret" is the bob account secret.
            </p>

            <h2> Bittoll Servers </h2>
            Currently there is one bittoll server up <code>us.bittoll.com</code>. In the future others nodes will be brought up. When we refer to an endpoint such as <code>/register</code>, the http post should actually be made to <code>http://us.bittoll.com/register</code>
            </section>
            <section id="register">
            <div class="page-header">
                <h1> /register</h1>
            </div>

            <h2> Purpose </h2>
            <p>
            This endpoint is what you call to create a new bittoll account. It generates a username and a password.
            </p>
            
            <h2> Format </h2>
            <p> This endpoint accepts anything as its post body and returns a message of the following format
            </p>
<pre>
{
    "username":"6f681f4d183923dba72783311ade639b2c04455013da8f1cd4bbb201864110a7"
    "secret":"4a3b2c5e1f7aabcaa7654128495e639b2c04455013da8f1cd4bbb201864110a7"
}</pre>
            </section>
        </div>
    </div>
</div>

<!--- Javascript at bottom ---!>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

</body>
</html>
